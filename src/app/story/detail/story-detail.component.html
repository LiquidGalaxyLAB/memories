<app-story-detail-banner
  [story]="story"
  [editState]="editState"
  (pending)="setPending('banner')"
  (unpending)="setUnpending('banner')">
</app-story-detail-banner>
<div class="avatar" [style.backgroundImage]="'url(' + owner?.photoURL + ')'"></div>

<div class="page story-detail-page">
  <div class="container">
    <div class="container__head-buttons">
      <app-story-detail-title
        [story]="story"
        [editState]="editState"
        (pending)="setPending('title')"
        (unpending)="setUnpending('title')">
      </app-story-detail-title>
      <div class="buttons">
        <a (click)="edit()" *ngIf="!isEditing()" md-button>Edit</a>
        <a (click)="cancel()" *ngIf="isEditing()" [disabled]="!isActivelyEditing()" md-button>Cancel</a>
        <a (click)="save()" *ngIf="isEditing()" [disabled]="!isActivelyEditing()" md-button>Save</a>
      </div>
    </div>

    <app-story-detail-date
      [story]="story"
      [editState]="editState"
      (pending)="setPending('date')"
      (unpending)="setUnpending('date')">
    </app-story-detail-date>

    <app-story-detail-photo [story]="story" [isEditing]="false"></app-story-detail-photo>
    
    <div class="box description">
      <app-story-detail-description
        [story]="story"
        [editState]="editState"
        (pending)="setPending('description')"
        (unpending)="setUnpending('description')">
      </app-story-detail-description>
    </div>
    
    <h2>Location</h2>
    <div class="box unspaced">
      <app-story-detail-map
        [story]="story"
        [editState]="editState"
        (pending)="setPending('map')"
        (unpending)="setUnpending('map')">
      </app-story-detail-map>
    </div>
  </div>
</div>